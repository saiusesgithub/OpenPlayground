<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>15 Puzzle Game</title>
    <link rel="stylesheet" href="style.css" />
    <!-- Google Fonts for Material Icons and Poppins font -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <button id="toggle-dark" class="toggle-dark-btn">
      <span id="toggle-dark-icon" class="material-icons">dark_mode</span>
    </button>
    <div class="container">
      <h1>ðŸ”¢ 15 Puzzle Game ðŸ”¢</h1>
      <p>Arrange the tiles in order from 1 to 15!</p>
      <div class="game-stats">
        <span id="move-counter"
          ><span
            class="material-icons"
            style="font-size: 1.1em; vertical-align: middle"
            >swap_horiz</span
          >
          Moves: 0</span
        >
        <span id="timer"
          ><span
            class="material-icons"
            style="font-size: 1.1em; vertical-align: middle"
            >timer</span
          >
          00:00</span
        >
      </div>
      <div id="puzzle" class="puzzle"></div>
      <h2 id="message"></h2>
      <button id="restart">Restart Game</button>
      <div
        id="confetti-canvas"
        style="
          position: absolute;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
          z-index: 10;
          display: none;
        "
      ></div>
    </div>

    <script src="script.js"></script>
    <script>
      // Theme toggle logic: initialize from main site, then standalone
      const toggleDarkBtn = document.getElementById("toggle-dark");
      const toggleDarkIcon = document.getElementById("toggle-dark-icon");
      const html = document.documentElement;

      function setThemeByName(theme) {
        if (theme === "dark") {
          document.body.classList.add("dark-mode");
          toggleDarkIcon.textContent = "light_mode";
        } else {
          document.body.classList.remove("dark-mode");
          toggleDarkIcon.textContent = "dark_mode";
        }
        html.setAttribute("data-theme", theme);
      }

      // Prefer gameTheme, else use main site theme
      const savedGameTheme = localStorage.getItem("gameTheme");
      const mainSiteTheme = localStorage.getItem("theme") || "light";
      const initialTheme = savedGameTheme || mainSiteTheme;
      setThemeByName(initialTheme);

      toggleDarkBtn.addEventListener("click", () => {
        const currentTheme =
          html.getAttribute("data-theme") === "dark" ? "dark" : "light";
        const newTheme = currentTheme === "dark" ? "light" : "dark";
        setThemeByName(newTheme);
        localStorage.setItem("gameTheme", newTheme);
      });
    </script>
  </body>
</html>
